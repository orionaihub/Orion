name = "ubix-agent"
main = "src/index.ts"
compatibility_date = "2025-11-03"
compatibility_flags = ["nodejs_compat"]

[assets]
directory = "public"          # your front-end

[[durable_objects.bindings]]
name = "Agent"
class_name = "Agent"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["Agent"]

[vars]
GOOGLE_API_KEY = "AIzaSyDxD7WiixJUVw6h0HWqW6lS8pHpVihnNTM"
CLOUDFLARE_ACCOUNT_ID = "4b4ec8bb6f23f3dcf72d173347ada9e2"
CLOUDFLARE_AI_GATEWAY_NAME = "xgateway"

# Pyodide 0.25 WASM (~800 kB gz) shipped as text blob
[text_blobs]
PYODIDE_SCRIPT = "wasm/pyodide-0.25.js"

# Optional: 1 cron to prune old traces (keeps you forever-free)
[[triggers.crons]]
schedule = "0 4 * * *"
# In Worker add: if (req.cf?.cron) { await DO.clearOldTraces(); return new Response("OK"); }
