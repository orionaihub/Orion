name = "ubix-agent"
main = "src/index.ts"
compatibility_date = "2025-08-03"
compatibility_flags = ["nodejs_compat"]

[assets]
directory = "public"          # your front-end

[[durable_objects.bindings]]
name = "Agent"
class_name = "Agent"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["Agent"]

[vars]
GOOGLE_API_KEY = "AIzaSyDxD7WiixJUVw6h0HWqW6lS8pHpVihnNTM"
CLOUDFLARE_ACCOUNT_ID = "34668b45439f017c6d958bfebc244e09"
CLOUDFLARE_AI_GATEWAY_NAME = "xgateway"

# Optional: 1 cron to prune old traces (keeps you forever-free)
[[triggers.crons]]
schedule = "0 4 * * *"
# In Worker add: if (req.cf?.cron) { await DO.clearOldTraces(); return new Response("OK"); }
