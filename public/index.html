<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <title>Orion Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Highlight.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <!-- Marked -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- Fixed script -->
  <script src="script.js" defer></script>
</head>

<body class="h-full bg-gray-900 text-gray-100 flex flex-col md:flex-row">
  <!-- ========= SIDEBAR (unchanged) ========= -->
  <aside id="sidebar" class="w-64 bg-gray-800/50 backdrop-blur border-r border-white/10 flex flex-col shrink-0 transition-transform md:translate-x-0 -translate-x-full fixed md:relative z-30 h-full">
    <div class="p-4 border-b border-white/10 flex items-center justify-between">
      <h1 class="text-lg font-bold">Orion</h1>
      <button id="menu-btn" class="md:hidden text-gray-300 hover:text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>

    <nav class="flex-1 px-4 py-4 space-y-2">
      <button id="new-chat-btn" class="w-full flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
        New chat
      </button>
    </nav>

    <div class="p-4 border-t border-white/10 text-xs text-gray-400 flex items-center gap-2">
      <span id="status-indicator" class="w-2 h-2 rounded-full bg-gray-500"></span>
      <span id="status-text">Disconnected</span>
    </div>
  </aside>

  <!-- Mobile overlay -->
  <div id="overlay" class="fixed inset-0 bg-black/60 z-20 hidden md:hidden"></div>

  <!-- ========= MAIN CHAT AREA ========= -->
  <main class="flex-1 flex flex-col h-full">
    <!-- Messages viewport -->
    <div id="chat-container" class="flex-1 overflow-y-auto custom-scrollbar">
      <div id="messages-wrapper" class="max-w-5xl mx-auto pb-4 pt-6">
        <!-- Welcome screen -->
        <div id="welcome-message" class="text-center py-20 px-4">
          <div class="inline-block bg-gradient-to-br from-teal-500 to-blue-600 rounded-full p-3 mb-6 shadow-lg">
            <svg class="w-10 h-10 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"/>
            </svg>
          </div>
          <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">How can I help you today?</h2>
          <p class="text-gray-400 mb-8">I can search the web, execute code, analyze files, and help with complex tasks</p>
          <div class="flex flex-wrap gap-2 justify-center max-w-2xl mx-auto">
            <button onclick="useSuggestion(this)" class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-full text-sm transition-colors">What's Bitcoin's price? üí∞</button>
            <button onclick="useSuggestion(this)" class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-full text-sm transition-colors">Analyze this dataset üìä</button>
            <button onclick="useSuggestion(this)" class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-full text-sm transition-colors">Write Python code üíª</button>
            <button onclick="useSuggestion(this)" class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-full text-sm transition-colors">Latest AI news üîç</button>
          </div>
        </div>
      </div>

      <!-- Typing indicator -->
      <div id="typing-indicator" class="hidden p-4 md:p-6">
        <div class="max-w-5xl mx-auto flex items-center gap-4">
          <div class="w-8 h-8 rounded-full bg-teal-600 flex items-center justify-center text-white">
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"/>
            </svg>
          </div>
          <div class="flex-1">
            <h3 class="font-semibold mb-1">Orion</h3>
            <p id="typing-text" class="text-gray-400 text-sm">Thinking‚Ä¶</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ========= INPUT AREA ========= -->
    <footer class="bg-gray-900/70 backdrop-blur border-t border-white/10">
      <div class="max-w-5xl mx-auto p-4">
        <!-- File preview chips -->
        <div id="file-preview" class="flex flex-wrap gap-2 mb-2"></div>

        <form id="chat-form" class="flex gap-3 items-end">
          <!-- File attachment -->
          <input id="file-input" type="file" multiple class="hidden" accept="*/*" />
          <label for="file-input" class="cursor-pointer text-gray-400 hover:text-white transition" title="Attach files">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.122 2.122l7.81-7.81"/>
            </svg>
          </label>

          <!-- Text input -->
          <textarea
            id="chat-input"
            rows="1"
            placeholder="Type your message‚Ä¶"
            class="flex-1 resize-none rounded-2xl bg-white/5 px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 max-h-[200px]"></textarea>

          <!-- Send button -->
          <button id="send-button" type="submit" class="shrink-0 w-10 h-10 grid place-items-center rounded-full bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-50 disabled:cursor-not-allowed" title="Send">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/>
            </svg>
          </button>
        </form>
      </div>
    </footer>
  </main>

  <!-- ========= INLINE STYLES (optional tweaks) ========= -->
  <style>
    /* Optional: thin scrollbar */
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { @apply bg-gray-600 rounded; }
    /* Agent message full-width card */
    .agent-card {
      @apply w-full bg-white/5 rounded-2xl border border-white/10 p-4 md:p-6;
    }
  </style>
</body>
</html>
